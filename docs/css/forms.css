@layer components {
  .field{ margin-block-end: var(--space-3); }
  .field > label{ display:block; font-weight:600; margin-block-end:.4rem; }
  .hint{ font-size:.9em; color: var(--gray-600); }
  .error{ font-size:.9em; color: var(--danger-600); }

  .input,.textarea,.select{
    width:100%; padding:.625rem .75rem; border:1px solid var(--border-color); border-radius:var(--radius-md);
    background:var(--bg-surface); color:var(--text-color);
    box-shadow: inset 0 0 0 1px hsl(0 0% 0% / 0); transition:border-color .2s, box-shadow .2s, background-color .2s;
  }
  .input:focus-visible,.textarea:focus-visible,.select:focus-visible{ border-color:var(--color-primary); box-shadow: inset 0 0 0 1px var(--color-primary); outline: none; }
  .field[data-state="error"] .input{ border-color: var(--danger-600); }

  .field[data-size="sm"] .input{ padding:.45rem .6rem; border-radius:var(--radius-sm); }
  .field[data-size="lg"] .input{ padding:.8rem .9rem; border-radius:var(--radius-lg); }

  .input-group{ display:flex; align-items:center; border:1px solid var(--border-color); border-radius:var(--radius-md); background:var(--bg-surface); overflow:hidden; }
  .input-group .addon{ padding:.625rem .75rem; background:hsl(0 0% 100%/.6); color:var(--gray-700); border-inline-end:1px solid var(--border-color); white-space:nowrap; }
  .input-group .input{ border:0; border-radius:0; box-shadow:none; flex:1 1 auto; min-width:0; }
  .input-group .input:focus-visible{ box-shadow: inset 0 0 0 2px var(--color-primary); }
  .input-group .addon:last-child{ border-inline-end:0; border-inline-start:1px solid var(--border-color); }

  .select{
    appearance:none; background-image:
      linear-gradient(45deg, transparent 50%, currentColor 50%),
      linear-gradient(135deg, currentColor 50%, transparent 50%),
      linear-gradient(to right, transparent, transparent);
    background-position:
      calc(100% - .9rem) 50%,
      calc(100% - .6rem) 50%,
      100% 0;
    background-size: .4em .4em, .4em .4em, 2.5em 100%;
    background-repeat:no-repeat;
  }

  .segmented{ display:inline-grid; grid-auto-flow:column; gap:2px; padding:2px; border:1px solid var(--border-color); border-radius:var(--radius-pill); background:hsl(0 0% 100%/.6); }
  .segmented input{ position:absolute; inline-size:1px; block-size:1px; opacity:0; }
  .segmented label{ padding:.45rem .9rem; border-radius:var(--radius-pill); cursor:pointer; user-select:none; color:var(--gray-700); }
  .segmented input:checked + label{ background:var(--color-primary); color:var(--on-primary); }
  .segmented label:focus-visible{ outline:2px solid var(--color-primary); outline-offset:2px; }

  .switch{ display:inline-flex; align-items:center; gap:.6rem; cursor:pointer; }
  .switch input{ position:absolute; inline-size:1px; block-size:1px; opacity:0; }
  .switch__track{ inline-size:44px; block-size:26px; background:var(--border-color); border-radius:var(--radius-pill); position:relative; transition: background-color .2s; }
  .switch__thumb{ position:absolute; inset-block-start:3px; inset-inline-start:3px; inline-size:20px; block-size:20px; border-radius:var(--radius-pill);
                  background:var(--bg-surface); box-shadow:0 1px 2px hsl(0 0% 0%/.12); transition: transform .2s; }
  .switch input:checked + .switch__track{ background:var(--color-primary); }
  .switch input:checked + .switch__track .switch__thumb{ transform: translateX(18px); }
  .switch__label{ color: var(--gray-700); }

  .input:where(:user-invalid,[aria-invalid="true"]), .textarea:where(:user-invalid,[aria-invalid="true"]), .select:where(:user-invalid,[aria-invalid="true"]){
    border-color: var(--color-danger); box-shadow: inset 0 0 0 1px var(--color-danger);
  }
  .input:user-valid, .textarea:user-valid, .select:user-valid{
    border-color: var(--color-success); box-shadow: inset 0 0 0 1px var(--color-success);
  }
}
